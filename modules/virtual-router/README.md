# üåê Virtual Router –¥–ª—è MODX

–ú–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –ø–æ–¥–¥–æ–º–µ–Ω–∞–º–∏ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `ContextRouter`

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

- –°–æ–∑–¥–∞—Ç—å –ø–ª–∞–≥–∏–Ω –≤ –∞–¥–º–∏–Ω–∫–µ `virtual-router/plugins/VirtualRouter.php`
- –î–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ data
- –£ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä http_host

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### üì¶ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å

- `components/` ‚Äî –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–æ–¥–µ—Ä–∂–∞—â–∏–µ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É –º–æ–¥—É–ª—è
- `index.php` ‚Äî –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞

---

### ‚úèÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

#### üîß `config/` _(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)_

–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤.  
–ü—Ä–∏–º–µ—Ä:  
`virtual-router/config/contexts/_example.php`

#### üìÇ `data/` _(–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)_

–î–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–∞ `virtual-router`.
s

- `data/changes/<CONTEXT_NAME>.php`

  –§–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–º–µ–Ω—É —Å–ª–æ–≤/—Ñ—Ä–∞–∑ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.  
   –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞:

  ```php
  <?php

  return function ($global_data) {
      return [
          "–ú–æ—Å–∫–≤–∞"     => $global_data["toponim"]["base"]["standart"],
          "–≤ –ú–æ—Å–∫–≤–µ"   => $global_data["toponim"]["where"]["standart"],
          "–ø–æ –ú–æ—Å–∫–≤–µ"  => $global_data["toponim"]["on"]["standart"],
          "–ú–æ—Å–∫–≤—ã"     => $global_data["toponim"]["what"]["standart"],
      ];
  };
  ```

- **`data/global/`** ‚Äî –•—Ä–∞–Ω–∏–ª–∏—â–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö –ø–æ –∫–∞—Å–∫–∞–¥—É:
  `common ‚Üí context ‚Üí regions`
  –ü–æ—Ä—è–¥–æ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:
  `virtual-router/components/providers/GlobalProvider.php`

  - **`data/global/common/data.json`** ‚Äî
    –û–±—â–∏–π —Ñ–∞–π–ª, –ø—Ä–∏–º–µ–Ω—è–µ–º—ã–π –∫–æ –≤—Å–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞–º –∏ —Ä–µ–≥–∏–æ–Ω–∞–º. –û–¥–∏–Ω –Ω–∞ –≤—Å—é —Å–∏—Å—Ç–µ–º—É.

  - **`data/global/contexts/<CONTEXT_KEY>.json`** ‚Äî
    –î–∞–Ω–Ω—ã–µ, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `web.json`, `mgr.json`).

  - **`data/global/regions/`** ‚Äî
    –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤ (—Ä–µ–≥–∏–æ–Ω–æ–≤).
    –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏:
    ```
    data/global/regions/<–ù–ê–ó–í–ê–ù–ò–ï_–†–ï–ì–ò–û–ù–ê_–ò–õ–ò_–û–ë–õ–ê–°–¢–ò>/<–ü–û–î–î–û–ú–ï–ù>.json
    ```
    **–ü—Ä–∏–º–µ—Ä:**
    `data/global/regions/msk-oblast/himki.json`

## –ü—Ä–∏–º–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö

himki.domain.ru

```json
{
  "toponim": {
    "base": {"standart": "–ú–æ—Å–∫–≤–∞"},
    "where": {"standart": "–≤ –ú–æ—Å–∫–≤–µ"},
    "on": {"standart": "–ø–æ –ú–æ—Å–∫–≤–µ"},
    "what": {"standart": "–ú–æ—Å–∫–≤—ã"}
  },
  "address": "–ê–¥—Ä–µ—Å –¥–ª—è –≥–æ—Ä–æ–¥–∞ himki –∏–∑ —Ñ–∞–π–ª—ã data/global/regions/msk-oblast/himki.json",
  "phone": "+7 (777) 777-77-77",
  "region": {
    "toponim": {
      "base": {"standart": "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å"},
      "where": {"standart": "–≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏"},
      "on": {"standart": "–ø–æ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏"},
      "what": {"standart": "–ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏"}
    }
  }
}
```
